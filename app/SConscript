import os

Import( 'AvTranscoder' )
Import( 'sAvTranscoder' )
#Import( 'AvTranscoder_jar' )
Import( 'installPrefix' )

env = Environment().Clone()

Import( 'env' )

avinfo = env.Program(
        'avinfo',
        Glob( 'avInfo/*.cpp' ),
        LIBS = [
                sAvTranscoder,
                'avutil',
                'avformat',
                'avcodec',
                'swscale',
                ]
        )

avmeta = env.Program(
        'avmeta',
        Glob( 'avMeta/*.cpp' ),
        LIBS = [
                sAvTranscoder,
                'avutil',
                'avformat',
                'avcodec',
                'swscale',
                ]
        )

avtransform = env.Program(
        'av++',
        Glob( 'avTranscoder/*.cpp' ),
        LIBS = [
                sAvTranscoder,
                'avutil',
                'avformat',
                'avcodec',
                'swscale',
                ]
        )

audioRewrapper = env.Program(
        'audioWrap',
        Glob( 'audioRewrapper/*.cpp' ),
        LIBS = [
                sAvTranscoder,
                'avutil',
                'avformat',
                'avcodec',
                'swscale',
                ]
        )

env.Depends( avinfo, sAvTranscoder )
env.Depends( avmeta, sAvTranscoder )
env.Depends( audioRewrapper, sAvTranscoder )

env.Alias( "install", env.Install(os.path.join( installPrefix, "bin" ), avmeta ) )
env.Alias( "install", env.Install(os.path.join( installPrefix, "bin" ), avtransform ) )
env.Alias( "install", env.Install(os.path.join( installPrefix, "bin" ), audioRewrapper ) )
